home â† "/home/brian/"
#home â†© "/mnt/0AD47A53D47A414D/Users/brian/Persinal/Scripts/BQN/"
âŸ¨rfâ‡rayffiâ‹„drawâ‹„windowâ‹„colorâ‹„keyâŸ© â† r â† â€¢Import homeâ€¢file.At"rayed-bqn/raylib.bqn"
rg â† â€¢Import homeâ€¢file.At"rayed-bqn/ffi/raygui.bqn"
json â† â€¢Import homeâ€¢file.At"rayed-bqn/src/imports/bqn-libs/json.bqn"
âŸ¨Get,PostâŸ© â† â€¢Import "bqn-curl/curl.bqn"
âŸ¨httpURLâ‹„delayâ‡dataRefreshRateâŸ© â† â€¢Import "settings.bqn"
âŸ¨
  guiControl
  guiControlProperty
  guiScrollBarProperty
  guiSliderProperty
  guiListViewProperty
âŸ© â† rg

panelContentRec â† 0â€¿0â€¿340â€¿340
panelView       â† 4â¥Š0
panelScroll     â† 99â€¿Â¯20â€¿0â€¿0

drawState â† { # Draw and process scroll bar style edition controls
  scrollbarSide  â‡ 0
}


xâ€¿yâ€¿widthâ€¿height â† â†•4 # indecies of rectangle
panelRec â† 20â€¿40â€¿200â€¿150

kr â† 20

# Draw and process scroll bar style edition controls
DrawStyleEditControls â† {ğ•ŠâŸ¨Â·âŸ©:
  # ScrollPanel style controls
  #----------------------------------------------------------
  Â·â€¿âŸ¨scrolledâŸ© â† rg.GuiToggleRefâŸ¨560â€¿110â€¿200â€¿35, " kr"âˆ¾Ëœâ€¢Repr 20, â‹ˆ0âŸ©
  âŸ¨scrolledâŸ©
}


PerFrame â† {ğ•Šframeâ€¿textâ€¿balâ€¿panelScrollâ€¿panelViewâ€¿drawState:
  newBal â† bal+key.IsPressed 'H'
  â€¢term.Flush@
  textNew â† {ğ•¤
    codeâ€¿contentâ† âŸ¨
      "Content-Type: application/json"
    âŸ© Post âŸ¨
      httpURLâˆ¾"/get"
      â€¢Repr newBal
    âŸ©
    !codeâ‰¡200
    {"data"â€¿x:{[âŸ¨"test"âŸ©â‹„âŸ¨sâŸ©]:s;!ğ•©}x}2âŠË˜json.Parse '{'âˆ¾contentâˆ¾'}'
  }âŸ(0=(âŒˆ60Ã—delay)|frame)text

  {ğ•¤
    rf.DrawTextâŸ¨ğ•¨â‹„30â‹„30+ğ•©â‹„30â‹„color.darkgreenâŸ© # text posX posY fontSize color                                     # Draw text (using default font)
  }Â¨âŸœ(30Ã—â†•âˆ˜â‰ )(@+10) ((âŠ¢-Ëœ+`Ã—Â¬)âˆ˜=âŠ”âŠ¢) (@+13)âŠ¸â‰ âŠ¸/textNew

  rf.DrawTextâŸ¨{ğ•Šaâ€¿b:aâˆ¾", "âˆ¾b}'-'âŸ('Â¯'âŠ¸=)Â¨âˆ˜â€¢ReprÂ¨ 2â†‘panelScroll, 4, 4, 20, color.redâŸ©

  {ğ•¤
    rg.GuiGridRefâŸ¨(panelRec+â—‹(2âŠ¸â†‘)panelScroll)âˆ¾2â†“panelContentRec, "", 16, 3, â‹ˆ0â€¿0âŸ©
  } draw._withinRectangle +`2â€¿2â¥ŠpanelView


  newDrawState â† DrawStyleEditControls drawState

  âŸ¨1+frameâ‹„textNewâ‹„newBalâ‹„panelScrollâ‹„panelViewâ‹„newDrawStateâŸ©
} draw._withCanvas_ color.lightgreen

window.Setsize 0.5
window.Open "user"
window.SetPos 2Ã·Ëœr.monitor.Size@
rg.GuiSetStyle âŸ¨guiControl.defaultâ‹„guiControlProperty.borderWidthâ‹„2âŸ©
PerFrame â€¢_While_(Â¬window.ShouldClose) 0â€¿""â€¿0â€¿panelScrollâ€¿panelViewâ€¿drawState
window.Close@